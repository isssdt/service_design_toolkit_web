<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">
    <script 
        type="text/javascript" 
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTfYgSvgKe9cbMi4RxsmLGUZU5acZpZIo&amp;libraries=visualization">
    </script>  
    <style type="text/css">
                .ui-diagram-element {
                    border: 0.1em dotted #E5E4E2;
                    background-color: #9CB071;width: 10em;
                    height: 8em;
                    text-align: center;
                    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);
                    border-radius: 4px;
                    color: #ffffff;
                }
                
                
                
                
                .ui-diagram-element:hover {
                    background-color: #C7C6C4;
                }
                
                .ui-dashboard-layout {
                    width: 100%; 
                    height: 400px; 
                    text-align: center;
                }
                
                .ui-panelgrid-layout {
                    margin-bottom:10px;
                }
                
                .ui-diagram-layout {
                    width:100%; 
                    height:350px;
                }
                
                .ui-facet-element {
                    display:block;
                    margin-top:1em;
                }


            </style>  

    <h:form>
        <h:panelGrid columns="2" styleClass="ui-panelgrid-layout" cellpadding="5" columnClasses="label, value">
            <p:outputLabel for="journey_list" value="Journey" />
            <p:selectOneMenu id="journey_list" width="30%" value="#{dashboardController.dashboardModel.journeyName}">
                <p:ajax listener="#{dashboardController.onJourneyChange()}" update="field_researcher_location_map, integration_map ,dia " />
                <f:selectItem itemLabel="Select Journey" itemValue="" noSelectionOption="true" />                         
                <f:selectItems value="#{dashboardController.dashboardView.journeyNameMap}"/>
            </p:selectOneMenu>
        </h:panelGrid>
        
        <div class="ui-g">
            <div class="ui-g-6">
                <p:panel header="Field Researcher Location" styleClass="ui-dashboard-layout" >
                    <p:gmap id="field_researcher_location_map" widgetVar="field_researcher_location_map" 
                        center="#{dashboardController.dashboardView.centerGeoMap}" zoom="13" type="ROADMAP"
                        model="#{dashboardController.dashboardView.field_researcher_location_map}" styleClass="ui-diagram-layout"/>
                </p:panel>
            </div>
           
            <div class="ui-g-6">
                <p:panel header="Integration Map" styleClass="ui-dashboard-layout">
                    <p:chart  widgetVar="integration_map" id="integration_map" type="line" model="#{dashboardController.dashboardView.integrationMapModel}"
                          styleClass="ui-diagram-layout" />
                    <p:resizable for="integration_map" />
                </p:panel>
            </div>
        </div>
        
        <p:panel  id="snake_view" header="Cutomer Journey Map" styleClass="ui-dashboard-layout">
            <p:diagram  id="dia" value="#{dashboardController.dashboardView.snakeModel}" style="width: 100%; height: 350px" styleClass="ui-widget-content" var="el" >
                <f:facet name="element">
                    <h:outputText value="#{el.name}" styleClass="ui-facet-element"/>
                    <h:outputText value="#{el.channelName}" styleClass="ui-facet-element"/>
                    <h:outputText value="#{el.channelDesc}" styleClass="ui-facet-element"/>
                    <h:graphicImage  name="img/maps_icon.jpg" width="20%" height="20%" rendered="#{el.channelName eq 'Kiosk'  or el.channelName eq 'Person To Person' }"/>
                </f:facet>
            </p:diagram> 
        </p:panel>
    
    </h:form>  
</ui:composition>
